import{i as Ue,w as $,o as fe,D as O,a9 as Ge,g as L,r as k,c as g,z as Xe,X as Fe,J as Ze,H as Te,E as Re,B as Je,C as Ye,h as b,L as R,I as Pe,N as He,a6 as ge,a7 as et,G as ce,aa as pe,a as tt,ab as ot,a0 as le,a8 as lt}from"./index.f83c29bb.js";import{Q as be,o as nt,h as N,p as ue,c as it,g as at}from"./QBtn.8be0fea1.js";import{u as Me,a as Ve,g as ut}from"./MenuLink.3c9cadc9.js";import{u as rt}from"./use-id.041421bb.js";import{f as st,u as ct,a as dt,b as ft,c as vt,g as ht}from"./use-timeout.1904721e.js";import{u as mt}from"./use-tick.7a0643c7.js";function gt({validate:e,resetValidation:t,requiresQForm:o}){const l=Ue(Ge,!1);if(l!==!1){const{props:i,proxy:u}=L();Object.assign(u,{validate:e,resetValidation:t}),$(()=>i.disable,n=>{n===!0?(typeof t=="function"&&t(),l.unbindComponent(u)):l.bindComponent(u)}),fe(()=>{i.disable!==!0&&l.bindComponent(u)}),O(()=>{i.disable!==!0&&l.unbindComponent(u)})}else o===!0&&console.error("Parent QForm not found on useFormChild()!")}const xe=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,ye=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Ce=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Y=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,ee=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,re={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>xe.test(e),hexaColor:e=>ye.test(e),hexOrHexaColor:e=>Ce.test(e),rgbColor:e=>Y.test(e),rgbaColor:e=>ee.test(e),rgbOrRgbaColor:e=>Y.test(e)||ee.test(e),hexOrRgbColor:e=>xe.test(e)||Y.test(e),hexaOrRgbaColor:e=>ye.test(e)||ee.test(e),anyColor:e=>Ce.test(e)||Y.test(e)||ee.test(e)},pt=[!0,!1,"ondemand"],bt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>pt.includes(e)}};function xt(e,t){const{props:o,proxy:l}=L(),i=k(!1),u=k(null),n=k(!1);gt({validate:A,resetValidation:f});let s=0,v;const d=g(()=>o.rules!==void 0&&o.rules!==null&&o.rules.length!==0),c=g(()=>o.disable!==!0&&d.value===!0&&t.value===!1),y=g(()=>o.error===!0||i.value===!0),w=g(()=>typeof o.errorMessage=="string"&&o.errorMessage.length!==0?o.errorMessage:u.value);$(()=>o.modelValue,()=>{n.value=!0,c.value===!0&&o.lazyRules===!1&&_()});function r(){o.lazyRules!=="ondemand"&&c.value===!0&&n.value===!0&&_()}$(()=>o.reactiveRules,B=>{B===!0?v===void 0&&(v=$(()=>o.rules,r,{immediate:!0,deep:!0})):v!==void 0&&(v(),v=void 0)},{immediate:!0}),$(()=>o.lazyRules,r),$(e,B=>{B===!0?n.value=!0:c.value===!0&&o.lazyRules!=="ondemand"&&_()});function f(){s++,t.value=!1,n.value=!1,i.value=!1,u.value=null,_.cancel()}function A(B=o.modelValue){if(o.disable===!0||d.value===!1)return!0;const T=++s,S=t.value!==!0?()=>{n.value=!0}:()=>{},E=(C,p)=>{C===!0&&S(),i.value=C,u.value=p||null,t.value=!1},x=[];for(let C=0;C<o.rules.length;C++){const p=o.rules[C];let q;if(typeof p=="function"?q=p(B,re):typeof p=="string"&&re[p]!==void 0&&(q=re[p](B)),q===!1||typeof q=="string")return E(!0,q),!1;q!==!0&&q!==void 0&&x.push(q)}return x.length===0?(E(!1),!0):(t.value=!0,Promise.all(x).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return T===s&&E(!1),!0;const p=C.find(q=>q===!1||typeof q=="string");return T===s&&E(p!==void 0,p),p===void 0},C=>(T===s&&(console.error(C),E(!0)),!1)))}const _=Xe(A,0);return O(()=>{v!==void 0&&v(),_.cancel()}),Object.assign(l,{resetValidation:f,validate:A}),Fe(l,"hasError",()=>y.value),{isDirtyModel:n,hasRules:d,hasError:y,errorMessage:w,validate:A,resetValidation:f}}const qe=/^on[A-Z]/;function yt(){const{attrs:e,vnode:t}=L(),o={listeners:k({}),attributes:k({})};function l(){const i={},u={};for(const n in e)n!=="class"&&n!=="style"&&qe.test(n)===!1&&(i[n]=e[n]);for(const n in t.props)qe.test(n)===!0&&(u[n]=t.props[n]);o.attributes.value=i,o.listeners.value=u}return Ze(l),l(),o}let P=[],G=[];function Le(e){G=G.filter(t=>t!==e)}function Ct(e){Le(e),G.push(e)}function we(e){Le(e),G.length===0&&P.length!==0&&(P[P.length-1](),P=[])}function We(e){G.length===0?e():P.push(e)}function qt(e){P=P.filter(t=>t!==e)}function wt(e){return e!=null&&(""+e).length!==0}const lo={...Me,...bt,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},no=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function io({requiredForAttr:e=!0,tagProp:t}={}){const{props:o,proxy:l}=L(),i=Ve(o,l.$q),u=rt({required:e,getValue:()=>o.for});return{requiredForAttr:e,tag:t===!0?g(()=>o.tag):{value:"label"},isDark:i,editable:g(()=>o.disable!==!0&&o.readonly!==!0),innerLoading:k(!1),focused:k(!1),hasPopupOpen:!1,splitAttrs:yt(),targetUid:u,rootRef:k(null),targetRef:k(null),controlRef:k(null)}}function ao(e){const{props:t,emit:o,slots:l,attrs:i,proxy:u}=L(),{$q:n}=u;let s=null;e.hasValue===void 0&&(e.hasValue=g(()=>wt(t.modelValue))),e.emitValue===void 0&&(e.emitValue=a=>{o("update:modelValue",a)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:F,onFocusout:I}),Object.assign(e,{clearValue:j,onControlFocusin:F,onControlFocusout:I,focus:p}),e.computedCounter===void 0&&(e.computedCounter=g(()=>{if(t.counter!==!1){const a=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,m=t.maxlength!==void 0?t.maxlength:t.maxValues;return a+(m!==void 0?" / "+m:"")}}));const{isDirtyModel:v,hasRules:d,hasError:c,errorMessage:y,resetValidation:w}=xt(e.focused,e.innerLoading),r=e.floatingLabel!==void 0?g(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):g(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),f=g(()=>t.bottomSlots===!0||t.hint!==void 0||d.value===!0||t.counter===!0||t.error!==null),A=g(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),_=g(()=>`q-field row no-wrap items-start q-field--${A.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(r.value===!0?" q-field--float":"")+(T.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&f.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),B=g(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),T=g(()=>t.labelSlot===!0||t.label!==void 0),S=g(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),E=g(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:r.value,modelValue:t.modelValue,emitValue:e.emitValue})),x=g(()=>{const a={};return e.targetUid.value&&(a.for=e.targetUid.value),t.disable===!0&&(a["aria-disabled"]="true"),a});function C(){const a=document.activeElement;let m=e.targetRef!==void 0&&e.targetRef.value;m&&(a===null||a.id!==e.targetUid.value)&&(m.hasAttribute("tabindex")===!0||(m=m.querySelector("[tabindex]")),m&&m!==a&&m.focus({preventScroll:!0}))}function p(){We(C)}function q(){qt(C);const a=document.activeElement;a!==null&&e.rootRef.value.contains(a)&&a.blur()}function F(a){s!==null&&(clearTimeout(s),s=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,o("focus",a))}function I(a,m){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,o("blur",a)),m!==void 0&&m())})}function j(a){Te(a),n.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),o("update:modelValue",null),o("clear",t.modelValue),Re(()=>{const m=v.value;w(),v.value=m})}function ne(){const a=[];return l.prepend!==void 0&&a.push(b("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:R},l.prepend())),a.push(b("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},Q())),c.value===!0&&t.noErrorIcon===!1&&a.push(W("error",[b(be,{name:n.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?a.push(W("inner-loading-append",l.loading!==void 0?l.loading():[b(nt,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&a.push(W("inner-clearable-append",[b(be,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||n.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:j})])),l.append!==void 0&&a.push(b("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:R},l.append())),e.getInnerAppend!==void 0&&a.push(W("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&a.push(e.getControlChild()),a}function Q(){const a=[];return t.prefix!==void 0&&t.prefix!==null&&a.push(b("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&a.push(e.getShadowControl()),e.getControl!==void 0?a.push(e.getControl()):l.rawControl!==void 0?a.push(l.rawControl()):l.control!==void 0&&a.push(b("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},l.control(E.value))),T.value===!0&&a.push(b("div",{class:S.value},N(l.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&a.push(b("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),a.concat(N(l.default))}function X(){let a,m;c.value===!0?y.value!==null?(a=[b("div",{role:"alert"},y.value)],m=`q--slot-error-${y.value}`):(a=N(l.error),m="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(a=[b("div",t.hint)],m=`q--slot-hint-${t.hint}`):(a=N(l.hint),m="q--slot-hint"));const D=t.counter===!0||l.counter!==void 0;if(t.hideBottomSpace===!0&&D===!1&&a===void 0)return;const J=b("div",{key:m,class:"q-field__messages col"},a);return b("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:R},[t.hideBottomSpace===!0?J:b(Pe,{name:"q-transition--field-message"},()=>J),D===!0?b("div",{class:"q-field__counter"},l.counter!==void 0?l.counter():e.computedCounter.value):null])}function W(a,m){return m===null?null:b("div",{key:a,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},m)}let Z=!1;return Je(()=>{Z=!0}),Ye(()=>{Z===!0&&t.autofocus===!0&&u.focus()}),t.autofocus===!0&&fe(()=>{u.focus()}),O(()=>{s!==null&&clearTimeout(s)}),Object.assign(u,{focus:p,blur:q}),function(){const m=e.getControl===void 0&&l.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...x.value}:x.value;return b(e.tag.value,{ref:e.rootRef,class:[_.value,i.class],style:i.style,...m},[l.before!==void 0?b("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:R},l.before()):null,b("div",{class:"q-field__inner relative-position col self-stretch"},[b("div",{ref:e.controlRef,class:B.value,tabindex:-1,...e.controlEvents},ne()),f.value===!0?X():null]),l.after!==void 0?b("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:R},l.after()):null])}}const St={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Et({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:l,proxy:i,emit:u}=L(),n=k(null);let s=null;function v(r){return n.value===null?!1:r===void 0||r.touches===void 0||r.touches.length<=1}const d={};o===void 0&&(Object.assign(d,{hide(r){i.hide(r)},toggle(r){i.toggle(r),r.qAnchorHandled=!0},toggleKey(r){He(r,13)===!0&&d.toggle(r)},contextClick(r){i.hide(r),R(r),Re(()=>{i.show(r),r.qAnchorHandled=!0})},prevent:R,mobileTouch(r){if(d.mobileCleanup(r),v(r)!==!0)return;i.hide(r),n.value.classList.add("non-selectable");const f=r.target;ge(d,"anchor",[[f,"touchmove","mobileCleanup","passive"],[f,"touchend","mobileCleanup","passive"],[f,"touchcancel","mobileCleanup","passive"],[n.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,i.show(r),r.qAnchorHandled=!0},300)},mobileCleanup(r){n.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&r!==void 0&&ut()}}),o=function(r=l.contextMenu){if(l.noParentEvent===!0||n.value===null)return;let f;r===!0?i.$q.platform.is.mobile===!0?f=[[n.value,"touchstart","mobileTouch","passive"]]:f=[[n.value,"mousedown","hide","passive"],[n.value,"contextmenu","contextClick","notPassive"]]:f=[[n.value,"click","toggle","passive"],[n.value,"keyup","toggleKey","passive"]],ge(d,"anchor",f)});function c(){et(d,"anchor")}function y(r){for(n.value=r;n.value.classList.contains("q-anchor--skip");)n.value=n.value.parentNode;o()}function w(){if(l.target===!1||l.target===""||i.$el.parentNode===null)n.value=null;else if(l.target===!0)y(i.$el.parentNode);else{let r=l.target;if(typeof l.target=="string")try{r=document.querySelector(l.target)}catch{r=void 0}r!=null?(n.value=r.$el||r,o()):(n.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return $(()=>l.contextMenu,r=>{n.value!==null&&(c(),o(r))}),$(()=>l.target,()=>{n.value!==null&&c(),w()}),$(()=>l.noParentEvent,r=>{n.value!==null&&(r===!0?c():o())}),fe(()=>{w(),t!==!0&&l.modelValue===!0&&n.value===null&&u("update:modelValue",!1)}),O(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:n,canShow:v,anchorEvents:d}}function kt(e,t){const o=k(null);let l;function i(s,v){const d=`${v!==void 0?"add":"remove"}EventListener`,c=v!==void 0?v:l;s!==window&&s[d]("scroll",c,ce.passive),window[d]("scroll",c,ce.passive),l=v}function u(){o.value!==null&&(i(o.value),o.value=null)}const n=$(()=>e.noParentEvent,()=>{o.value!==null&&(u(),t())});return O(n),{localScrollTarget:o,unconfigureScrollTarget:u,changeScrollEvent:i}}let _t=1,Bt=document.body;function $t(e,t){const o=document.createElement("div");if(o.id=t!==void 0?`q-portal--${t}--${_t++}`:e,pe.globalNodes!==void 0){const l=pe.globalNodes.class;l!==void 0&&(o.className=l)}return Bt.appendChild(o),o}function At(e){e.remove()}const U=[];function Ft(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return ue(e)}else if(e.__qPortal===!0){const o=ue(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=ue(e)}while(e!=null)}function Tt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Rt(e,t,o,l){const i=k(!1),u=k(!1);let n=null;const s={},v=l==="dialog"&&Tt(e);function d(y){if(y===!0){we(s),u.value=!0;return}u.value=!1,i.value===!1&&(v===!1&&n===null&&(n=$t(!1,l)),i.value=!0,U.push(e.proxy),Ct(s))}function c(y){if(u.value=!1,y!==!0)return;we(s),i.value=!1;const w=U.indexOf(e.proxy);w!==-1&&U.splice(w,1),n!==null&&(At(n),n=null)}return tt(()=>{c(!0)}),e.proxy.__qPortal=!0,Fe(e.proxy,"contentEl",()=>t.value),{showPortal:d,hidePortal:c,portalIsActive:i,portalIsAccessible:u,renderPortal:()=>v===!0?o():i.value===!0?[b(ot,{to:n},o())]:void 0}}const Pt={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Ht(e,t=()=>{},o=()=>{}){return{transitionProps:g(()=>{const l=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${l}-enter-from`,enterActiveClass:`${l}-enter-active`,enterToClass:`${l}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:g(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const H=[];let z;function Mt(e){z=e.keyCode===27}function Vt(){z===!0&&(z=!1)}function Lt(e){z===!0&&(z=!1,He(e,27)===!0&&H[H.length-1](e))}function De(e){window[e]("keydown",Mt),window[e]("blur",Vt),window[e]("keyup",Lt),z=!1}function Wt(e){le.is.desktop===!0&&(H.push(e),H.length===1&&De("addEventListener"))}function Se(e){const t=H.indexOf(e);t!==-1&&(H.splice(t,1),H.length===0&&De("removeEventListener"))}const M=[];function ze(e){M[M.length-1](e)}function Dt(e){le.is.desktop===!0&&(M.push(e),M.length===1&&document.body.addEventListener("focusin",ze))}function zt(e){const t=M.indexOf(e);t!==-1&&(M.splice(t,1),M.length===0&&document.body.removeEventListener("focusin",ze))}const{notPassiveCapture:te}=ce,V=[];function oe(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=U.length-1;for(;o>=0;){const l=U[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=V.length-1;l>=0;l--){const i=V[l];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Ot(e){V.push(e),V.length===1&&(document.addEventListener("mousedown",oe,te),document.addEventListener("touchstart",oe,te))}function Ee(e){const t=V.findIndex(o=>o===e);t!==-1&&(V.splice(t,1),V.length===0&&(document.removeEventListener("mousedown",oe,te),document.removeEventListener("touchstart",oe,te)))}let ke,_e;function Be(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function It(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const de={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{de[`${e}#ltr`]=e,de[`${e}#rtl`]=e});function $e(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:de[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function jt(e,t){let{top:o,left:l,right:i,bottom:u,width:n,height:s}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],l-=t[0],u+=t[1],i+=t[0],n+=t[0],s+=t[1]),{top:o,bottom:u,height:s,left:l,right:i,width:n,middle:l+(i-l)/2,center:o+(u-o)/2}}function Qt(e,t,o){let{top:l,left:i}=e.getBoundingClientRect();return l+=t.top,i+=t.left,o!==void 0&&(l+=o[1],i+=o[0]),{top:l,bottom:l+1,height:1,left:i,right:i+1,width:1,middle:i,center:l}}function Kt(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Ae(e,t,o,l){return{top:e[o.vertical]-t[l.vertical],left:e[o.horizontal]-t[l.horizontal]}}function Oe(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Oe(e,t+1)},10);return}const{targetEl:o,offset:l,anchorEl:i,anchorOrigin:u,selfOrigin:n,absoluteOffset:s,fit:v,cover:d,maxHeight:c,maxWidth:y}=e;if(le.is.ios===!0&&window.visualViewport!==void 0){const C=document.body.style,{offsetLeft:p,offsetTop:q}=window.visualViewport;p!==ke&&(C.setProperty("--q-pe-left",p+"px"),ke=p),q!==_e&&(C.setProperty("--q-pe-top",q+"px"),_e=q)}const{scrollLeft:w,scrollTop:r}=o,f=s===void 0?jt(i,d===!0?[0,0]:l):Qt(i,s,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:y||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:A,offsetHeight:_}=o,{elWidth:B,elHeight:T}=v===!0||d===!0?{elWidth:Math.max(f.width,A),elHeight:d===!0?Math.max(f.height,_):_}:{elWidth:A,elHeight:_};let S={maxWidth:y,maxHeight:c};(v===!0||d===!0)&&(S.minWidth=f.width+"px",d===!0&&(S.minHeight=f.height+"px")),Object.assign(o.style,S);const E=Kt(B,T);let x=Ae(f,E,u,n);if(s===void 0||l===void 0)se(x,f,E,u,n);else{const{top:C,left:p}=x;se(x,f,E,u,n);let q=!1;if(x.top!==C){q=!0;const F=2*l[1];f.center=f.top-=F,f.bottom-=F+2}if(x.left!==p){q=!0;const F=2*l[0];f.middle=f.left-=F,f.right-=F+2}q===!0&&(x=Ae(f,E,u,n),se(x,f,E,u,n))}S={top:x.top+"px",left:x.left+"px"},x.maxHeight!==void 0&&(S.maxHeight=x.maxHeight+"px",f.height>x.maxHeight&&(S.minHeight=S.maxHeight)),x.maxWidth!==void 0&&(S.maxWidth=x.maxWidth+"px",f.width>x.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(o.style,S),o.scrollTop!==r&&(o.scrollTop=r),o.scrollLeft!==w&&(o.scrollLeft=w)}function se(e,t,o,l,i){const u=o.bottom,n=o.right,s=st(),v=window.innerHeight-s,d=document.body.clientWidth;if(e.top<0||e.top+u>v)if(i.vertical==="center")e.top=t[l.vertical]>v/2?Math.max(0,v-u):0,e.maxHeight=Math.min(u,v);else if(t[l.vertical]>v/2){const c=Math.min(v,l.vertical==="center"?t.center:l.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(u,c),e.top=Math.max(0,c-u)}else e.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(u,v-e.top);if(e.left<0||e.left+n>d)if(e.maxWidth=Math.min(n,d),i.horizontal==="middle")e.left=t[l.horizontal]>d/2?Math.max(0,d-n):0;else if(t[l.horizontal]>d/2){const c=Math.min(d,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(n,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(n,d-e.left)}var uo=it({name:"QMenu",inheritAttrs:!1,props:{...St,...ct,...Me,...Pt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Be},self:{type:String,validator:Be},offset:{type:Array,validator:It},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...dt,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){let i=null,u,n,s;const v=L(),{proxy:d}=v,{$q:c}=d,y=k(null),w=k(!1),r=g(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),f=Ve(e,c),{registerTick:A,removeTick:_}=mt(),{registerTimeout:B}=ft(),{transitionProps:T,transitionStyle:S}=Ht(e),{localScrollTarget:E,changeScrollEvent:x,unconfigureScrollTarget:C}=kt(e,he),{anchorEl:p,canShow:q}=Et({showing:w}),{hide:F}=vt({showing:w,canShow:q,handleShow:J,handleHide:Ie,hideOnRouteChange:r,processOnMount:!0}),{showPortal:I,hidePortal:j,renderPortal:ne}=Rt(v,y,Qe,"menu"),Q={anchorEl:p,innerRef:y,onClickOutside(h){if(e.persistent!==!0&&w.value===!0)return F(h),(h.type==="touchstart"||h.target.classList.contains("q-dialog__backdrop"))&&Te(h),!0}},X=g(()=>$e(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),W=g(()=>e.cover===!0?X.value:$e(e.self||"top start",c.lang.rtl)),Z=g(()=>(e.square===!0?" q-menu--square":"")+(f.value===!0?" q-menu--dark q-dark":"")),a=g(()=>e.autoClose===!0?{onClick:je}:{}),m=g(()=>w.value===!0&&e.persistent!==!0);$(m,h=>{h===!0?(Wt(ie),Ot(Q)):(Se(ie),Ee(Q))});function D(){We(()=>{let h=y.value;h&&h.contains(document.activeElement)!==!0&&(h=h.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||h.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||h.querySelector("[autofocus], [data-autofocus]")||h,h.focus({preventScroll:!0}))})}function J(h){if(i=e.noRefocus===!1?document.activeElement:null,Dt(me),I(),he(),u=void 0,h!==void 0&&(e.touchPosition||e.contextMenu)){const ae=lt(h);if(ae.left!==void 0){const{top:Ke,left:Ne}=p.value.getBoundingClientRect();u={left:ae.left-Ne,top:ae.top-Ke}}}n===void 0&&(n=$(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,K)),e.noFocus!==!0&&document.activeElement.blur(),A(()=>{K(),e.noFocus!==!0&&D()}),B(()=>{c.platform.is.ios===!0&&(s=e.autoClose,y.value.click()),K(),I(!0),o("show",h)},e.transitionDuration)}function Ie(h){_(),j(),ve(!0),i!==null&&(h===void 0||h.qClickOutside!==!0)&&(((h&&h.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),B(()=>{j(!0),o("hide",h)},e.transitionDuration)}function ve(h){u=void 0,n!==void 0&&(n(),n=void 0),(h===!0||w.value===!0)&&(zt(me),C(),Ee(Q),Se(ie)),h!==!0&&(i=null)}function he(){(p.value!==null||e.scrollTarget!==void 0)&&(E.value=ht(p.value,e.scrollTarget),x(E.value,K))}function je(h){s!==!0?(Ft(d,h),o("click",h)):s=!1}function me(h){m.value===!0&&e.noFocus!==!0&&at(y.value,h.target)!==!0&&D()}function ie(h){o("escapeKey"),F(h)}function K(){Oe({targetEl:y.value,offset:e.offset,anchorEl:p.value,anchorOrigin:X.value,selfOrigin:W.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Qe(){return b(Pe,T.value,()=>w.value===!0?b("div",{role:"menu",...l,ref:y,tabindex:-1,class:["q-menu q-position-engine scroll"+Z.value,l.class],style:[l.style,S.value],...a.value},N(t.default)):null)}return O(ve),Object.assign(d,{focus:D,updatePosition:K}),ne}});const ro={name:String};function so(e={}){return(t,o,l)=>{t[o](b("input",{class:"hidden"+(l||""),...e.value}))}}function co(e){return g(()=>e.name||e.for)}const Nt=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Ut=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Gt=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Xt=/[a-z0-9_ -]$/i;function fo(e){return function(o){if(o.type==="compositionend"||o.type==="change"){if(o.target.qComposing!==!0)return;o.target.qComposing=!1,e(o)}else o.type==="compositionupdate"&&o.target.qComposing!==!0&&typeof o.data=="string"&&(le.is.firefox===!0?Xt.test(o.data)===!1:Nt.test(o.data)===!0||Ut.test(o.data)===!0||Gt.test(o.data)===!0)===!0&&(o.target.qComposing=!0)}}export{uo as Q,no as a,ao as b,io as c,Pt as d,Ht as e,Rt as f,We as g,Se as h,Dt as i,Wt as j,ro as k,co as l,wt as m,fo as n,so as o,zt as r,lo as u};
